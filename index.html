<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <link href="dist/output.css" rel="stylesheet" />
  </head>
  <body>
    <h1 class="text-3xl font-bold">振り分けくん</h1>

    <div class="container">
      <div class="mt-3">
        <form action="" class="form-group" id="form-group" method="post">
          <div class="form-group-num">
            <label for="group-num">ブレイクアウトルームの数</label>
            <input
              class="group-num focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
              id="group-num"
              required
              type="text"
            />
          </div>
          <div class="form-submit">
            <input
              class="py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              type="submit"
              value="振り分け！"
            />
          </div>
        </form>
      </div>
    </div>

    <script>
      let groupId = 0;
      let nameId = 0;
      let areaId = 0;

      function addGroupForm() {
        const contentArea = document.getElementById('form-group');
        const newFromAttributeGroup = document.createElement('div');
        groupId++;
        nameId++;
        areaId++;
        newFromAttributeGroup.setAttribute('id', `form-group-${groupId}`);
        newFromAttributeGroup.className = 'mt-3 grid grid-cols-6 gap-6';
        newFromAttributeGroup.innerHTML = `
      <div>
        <label for='element'>属性</label>
        <input type='text' class='element focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md' id='element' required />
      </div>
      <div id='form-area-${areaId}' class=''>
        <div id='form-input-info-${nameId}' class='form-group'>
          <label for='element'>名前</label>
          <input type='text' class='name group-num focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md' id='name' required />
          <label for='element'>メアド</label>
          <input type='text' class='email focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md' id='email' required />
          <input type='button' class='bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' value='＋' onclick="addInputInfo('form-area-${areaId}')" />
          <input type='button' class='bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' value='－' onclick="deleteElement('form-input-info-${nameId}')" />
        </div>
      </div>
      <input type='button' class='bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' value='＋' onclick='addGroupForm()' />
      <input type='button' class='bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' value='－' onclick="deleteElement('form-group-${groupId}')" />
    `;
        contentArea.appendChild(newFromAttributeGroup);
      }

      function deleteElement(idName) {
        const contentArea = document.getElementById(idName);
        contentArea.remove();
      }

      function addInputInfo(addAreaId) {
        const contentArea = document.getElementById(addAreaId);
        const newFromAttributeGroup = document.createElement('div');
        nameId++;
        newFromAttributeGroup.setAttribute('id', `form-input-info-${nameId}`);
        newFromAttributeGroup.innerHTML = `
          <label for='element'>名前: </label>
          <input type='text' class='name focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md' id='name' required />
          <label for='element'>メアド: </label>
          <input type='text' class='email focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md' id='email' required />
          <input type='button' value='＋' onclick="addInputInfo('form-area-${areaId}')" />
          <input type='button' value='－' onclick="deleteElement('form-input-info-${nameId}')" />
    `;
        contentArea.appendChild(newFromAttributeGroup);
      }

      window.addEventListener('DOMContentLoaded', function () {
        addGroupForm();

        // HTML要素を取得
        let formGroup = document.getElementById('form-group');

        // submitを待っている
        formGroup.addEventListener('submit', function (e) {
          // グループの数を表示
          const groupNum = document.getElementsByClassName('group-num');
          console.log('グループ数 = ' + groupNum[0].value);

          // 属性の表示
          const elementList = document.getElementsByClassName('element');
          for (let i = 0; i < elementList.length; i++) {
            console.log(i + 'つ目の属性 = ' + elementList[i].value);
          }

          // 人の名前の表示
          const nameList = document.getElementsByClassName('name');
          for (let i = 0; i < nameList.length; i++) {
            console.log(i + '人目の名前 = ' + nameList[i].value);
          }

          // メアドの表示
          const emailList = document.getElementsByClassName('email');
          for (let i = 0; i < emailList.length; i++) {
            console.log(i + '人目のメアド = ' + emailList[i].value);
          }

          // デバッグ時ページが更新されないようにイベントを止める
          e.preventDefault();
        });
      });
    </script>
  </body>
</html>
